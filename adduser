#!/usr/bin/expect -f

set username [lindex $argv 0];
set password [lindex $argv 1];
set date [lindex $argv 1];

set timeout -1

spawn connect

expect "VPN Server/VPN>"
send -- "UserCreate $username\n"

expect "Assigned Group Name: "
send -- "\n"

expect "User Full Name: "
send -- "John Doe\n"

expect "User Description: "
send -- "Generated by AutoScript\n"

expect "VPN Server/VPN>"
send -- "UserExpiresSet $username\n" 

expect "User Expiration Date (no expiration if nothing specified): "
send -- "$date\n" 

expect "VPN Server/VPN>"
send -- "UserPasswordSet $username\n"

expect "Password: "
send -- "$password\n"

expect "Confirm input: "
send -- "$password\n"

expect eof


